name: Auto Fix Cloud Android

on:
  workflow_dispatch: # à¸à¸”à¸£à¸±à¸™à¹€à¸­à¸‡à¹ƒà¸™ Actions à¹„à¸”à¹‰
  push:
    branches: [ "main" ]

jobs:
  autofix:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Apply autofix
        run: |
          echo "ðŸ”§ Patching Dockerfile, start.sh, docker-compose.yml"
          # à¹€à¸‚à¸µà¸¢à¸™à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆà¹à¸à¹‰à¹à¸¥à¹‰à¸§
          cat > cloud-android/Dockerfile <<'EOF'
          [à¹‚à¸„à¹‰à¸” Dockerfile à¸—à¸µà¹ˆà¸œà¸¡à¹à¸à¹‰à¹à¸¥à¹‰à¸§]
          EOF

          cat > cloud-android/start.sh <<'EOF'
          [à¹‚à¸„à¹‰à¸” start.sh à¸—à¸µà¹ˆà¸œà¸¡à¹à¸à¹‰à¹à¸¥à¹‰à¸§]
          EOF

          cat > docker-compose.yml <<'EOF'
          [à¹‚à¸„à¹‰à¸” docker-compose.yml à¸—à¸µà¹ˆà¸œà¸¡à¹à¸à¹‰à¹à¸¥à¹‰à¸§]
          EOF

      - name: Commit & Push
        run: |
          git config --global user.name "autofix-bot"
          git config --global user.email "autofix@users.noreply.github.com"
          git add .
          git commit -m "Auto fix Dockerfile/start.sh/docker-compose"
          git push origin main
